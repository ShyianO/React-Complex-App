(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{216:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a.n(n),s=a(4),l=a(3),o=a(105),r=a.n(o),u=a(19),i=a(2),m=a.n(i),d=a(13),f=a(10),p=a(15),E=a(17),b=a(7);t.default=function(){const e=Object(n.useContext)(d.a),t=Object(n.useContext)(f.a),{id:a}=Object(s.g)(),[o,i]=Object(n.useState)(!0),[h,g]=Object(n.useState)(),[w,y]=Object(n.useState)(0),[k,N]=Object(n.useState)(!1);if(Object(n.useEffect)(()=>{const e=m.a.CancelToken.source();return async function(){try{const t=await m.a.get("/post/"+a,{cancelToken:e.token});g(t.data),i(!1)}catch(e){console.log("fetch problem")}}(),()=>{e.cancel()}},[a]),Object(n.useEffect)(()=>{if(w){const e=m.a.CancelToken.source();return async function(){try{"Success"==(await m.a.delete("/post/"+a,{data:{token:t.user.token}},{cancelToken:e.token})).data&&N(!0)}catch(e){console.log("delete problems")}}(),()=>{e.cancel()}}},[w]),k)return e({type:"flashMessage",value:"Post was successfully deleted."}),c.a.createElement(s.a,{to:"/profile/"+t.user.username});if(!o&&!h)return c.a.createElement(E.a,null);if(o)return c.a.createElement(b.a,{title:"..."},c.a.createElement(p.a,null));const j=new Date(h.createdDate),O=`${j.getDate()}/${j.getMonth()+1}/${j.getFullYear()}`;return c.a.createElement(b.a,{title:h.title},c.a.createElement("div",{className:"d-flex justify-content-between"},c.a.createElement("h2",null,h.title),!!t.loggedIn&&t.user.username==h.author.username&&c.a.createElement("span",{className:"pt-2"},c.a.createElement(l.b,{to:`/post/${h._id}/edit`,"data-tip":"Edit","data-for":"edit",className:"text-primary mr-2"},c.a.createElement("i",{className:"fas fa-edit"})),c.a.createElement(u.a,{id:"edit",className:"custom-tooltip"})," ",c.a.createElement("a",{onClick:function(){window.confirm("Do you really want to delete this post?")&&y(e=>e+1)},"data-tip":"Delete","data-for":"delete",className:"delete-post-button text-danger"},c.a.createElement("i",{className:"fas fa-trash"})),c.a.createElement(u.a,{id:"delete",className:"custom-tooltip"}))),c.a.createElement("p",{className:"text-muted small mb-4"},c.a.createElement(l.b,{to:"/profile/"+h.author.username},c.a.createElement("img",{className:"avatar-tiny",src:h.author.avatar})),"Posted by"," ",c.a.createElement(l.b,{to:"/profile/"+h.author.username},h.author.username)," ","on ",O),c.a.createElement("div",{className:"body-content"},c.a.createElement(r.a,{source:h.body,allowedTypes:["paragraph","strong","emphasis","text","heading","list","listItem"]})))}}}]);